# 007项 - AI项目文档生成规范（Vercel + Supabase版本）

项目名称：小红书竞品笔记监控系统。

## 产品概述
目的是从千瓜数据平台上，获取按品牌归类的笔记列表，获取相关笔记前端数据、达人信息、合作费用、并通过AI对内容分析，进行内容类别判别和笔记相关单品名称。可以自定义报告所需组织笔记，给出分析结果。

目前产品还刚开始，从零开始搭建。

## 项目文档结构要求

### 文档目录结构
```
/.项目文档/
├── 00_项目说明/
│   └── 框架使用说明.md                    <-- 项目业务说明
│
├── 01_产品定义/
│   ├── 01_产品核心目标.md
│   └── 02_功能规格/                      <-- 功能说明的目录，每个主功能创建一个文档
│
├── 02_UI设计/
│   ├── 01_简版设计规范.md
│   └── 02_原型与线框图/                  <-- 存放视觉原型目录，每个页面创建一个文档
│
├── 03_技术实现/
│   ├── 01_技术方案.md
│   ├── 02_代码规范.md
│   ├── 03_数据库设计.md                  <-- 独立的数据库设计
│   ├── 04_数据库创建文件.sql              <-- supbase 数据库创建文件
│   ├── 05_API接口契约/
│   │   └── API_核心数据处理.md
│   └── 06_代码结构.md
│
├── 04_质量保证/
│   ├── 01_测试策略.md
│   └── 02_测试用例/                     <-- 测试用例目录，每个业务逻辑的测试创建一个文档
│
└── 05_核心业务逻辑/                     <-- 存放复杂业务逻辑目录，每个业务逻辑创建一个文档
```

## 技术开发规范

### 技术栈要求
- **前端框架**: Next.js (App Router) + antd (最新版本) + Supabase (PostgreSQL + Edge Functions)
- **部署**: Vercel
- **数据库**: Supabase PostgreSQL
- **认证**: Supabase Auth
- **存储**: Supabase Storage
- **AI服务**: Google Gemini API (通过环境变量配置)
- **构建工具**: 匹配Vercel
- **版本控制**: Git
- **数据来源**: 数据由独立的爬虫系统直接写入Supabase数据库表，本系统负责读取和分析

### 代码规范要求
- **前端代码**: 使用ESLint + Prettier进行代码格式化
- **TypeScript**: 使用TypeScript进行类型安全开发
- **注释规范**: 编写完整的类、方法、复杂逻辑注释
- **命名规范**: 使用有意义的变量名和函数名，遵循驼峰命名法
- **代码审查**: 所有代码必须经过代码审查才能合并

### 数据库规范要求
- **表名规范**: 使用中文描述，便于业务理解
- **字段命名**: 采用驼峰命名法
- **索引策略**: 合理设置主键、唯一索引、普通索引
- **数据类型**: 选择合适的字段类型和长度
- **约束条件**: 设置必要的非空、唯一、外键约束
- **RLS策略**: 使用Supabase Row Level Security进行数据安全控制

### API接口规范要求
- **设计风格**: 使用RESTful API设计风格
- **响应格式**: 统一的JSON响应格式
- **状态码**: 使用标准HTTP状态码
- **错误处理**: 完善的错误处理机制和错误码定义
- **接口文档**: 使用Supabase自动生成的API文档
- **认证**: 使用Supabase JWT进行API认证

## UI设计规范要求

### 设计原则
- **简洁明了**: 界面布局清晰，信息层次分明，减少不必要的装饰元素
- **一致性**: 统一的视觉风格和交互模式，标准化的组件使用
- **易用性**: 操作流程简单直观，减少用户学习成本，提供清晰的操作反馈

### 色彩规范
- **主色调**: #1890ff (antd 默认蓝色)
- **功能色**: 成功色#52c41a、警告色#faad14、危险色#ff4d4f、信息色#1890ff
- **中性色**: 背景色#fafafa、边框色#d9d9d9、文字色#262626、次要文字#8c8c8c
- **注**: 遵循antd 5.x设计规范的颜色系统

### 字体规范
- **字体族**: 中文字体"PingFang SC", "Microsoft YaHei"，英文字体"Helvetica Neue", Arial
- **字体大小**: 大标题20px、中标题16px、小标题14px、正文14px、辅助文字12px
- **字重**: 标题使用600/500，正文使用400

### 间距规范
- **基础单位**: 8px
- **间距等级**: 小间距4px、中间距8px、大间距16px、超大间距24px
- **组件间距**: 页面边距24px、组件间距16px、表单项间距16px、按钮间距8px

### 组件规范
- **按钮**: 使用antd Button组件，主要按钮使用主色调，次要按钮使用默认样式，危险按钮使用危险色
- **表格**: 使用antd Table组件，默认行高，表头背景色#fafafa，悬停效果#fafafa，选中效果#e6f7ff
- **表单**: 使用antd Form组件，标签宽度遵循antd规范，输入框高度32px，必填标识红色星号
- **分页**: 使用antd Pagination组件，每页条数10/20/50/100可选，支持跳转功能

### 布局规范
- **页面布局**: 顶部导航60px、侧边栏200px、主内容区自适应、底部40px
- **响应式**: 桌面端≥1200px、平板端768px-1199px、手机端<768px
- **内容布局**: 页面标题24px、面包屑12px、操作区域右对齐

### 交互规范
- **状态反馈**: 加载状态显示loading动画，成功/错误状态显示相应提示
- **操作反馈**: 按钮点击效果，表单提交状态，数据保存成功提示
- **导航交互**: 菜单平滑展开，页面淡入淡出切换

### 动画规范
- **过渡动画**: 持续时间0.3s，缓动函数ease-in-out
- **加载动画**: 旋转动画1s linear infinite，脉冲动画1.5s ease-in-out infinite

### 无障碍设计
- **键盘导航**: 支持Tab键顺序导航、Enter键确认、Esc键取消、方向键列表导航
- **屏幕阅读器**: 使用语义化标签、添加alt属性、使用aria标签

### 浏览器兼容性
- **支持浏览器**: Chrome≥70、Firefox≥65、Safari≥12、Edge≥79
- **兼容性处理**: 自动添加CSS前缀、使用必要polyfill、提供功能降级方案

## 质量保证要求

### 测试要求
- **单元测试**: 代码覆盖率≥80%
- **集成测试**: 接口测试通过率100%
- **系统测试**: 功能测试通过率≥95%
- **性能测试**: 页面加载时间<2秒，API响应时间<1秒
- **安全测试**: 0个高危漏洞，100%敏感数据加密

### 文档要求
- **API文档**: 使用Supabase自动生成API文档
- **代码注释**: 类、方法、复杂逻辑必须有完整注释
- **变更日志**: 记录每次版本的功能变更和修复
- **部署文档**: 提供详细的Vercel和Supabase部署文档

## 环境配置要求

### 开发环境
- **Node.js版本**: Node.js 18+
- **数据库**: Supabase PostgreSQL
- **IDE推荐**: VS Code
- **版本控制**: Git
- **包管理器**: npm 或 yarn

### Supabase配置信息
```
项目URL: https://plvjtbzwbxmajnkanhbe.supabase.co
API Key: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBsdmp0Ynp3YnhtYWpua2FuaGJlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAzODE4NjUsImV4cCI6MjA3NTk1Nzg2NX0.oQVOyp-dGdUqctn6dfvhWnFp2TUDOwY_y0M5_vl9e7U
Service Role Key: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBsdmp0Ynp3YnhtYWpua2FuaGJlIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MDM4MTg2NSwiZXhwIjoyMDc1OTU3ODY1fQ.fKlQ2fr1rqXnULMRYy525GsAd9Y03qh0NsLDEyTblZI
数据库URL: postgresql://postgres:Aizan.123456.Aizan@db.plvjtbzwbxmajnkanhbe.supabase.co:5432/postgres
```

### 项目类型
全栈Web应用，前端使用Next.js (App Router) + antd (最新版本) 部署到Vercel，后端使用Supabase提供数据库、认证和API服务。AI分析功能使用Google Gemini API，通过环境变量配置API Key。

## AI生成要求

### 文档生成标准
- **内容完整性**: 每个文档必须包含完整的业务逻辑和技术实现
- **格式统一性**: 所有文档使用统一的Markdown格式和结构
- **技术准确性**: 技术方案必须符合当前最佳实践
- **业务合理性**: 业务逻辑必须符合实际业务需求

### 代码生成标准
- **代码质量**: 生成的代码必须符合规范要求，可直接运行
- **注释完整**: 关键代码必须有详细注释说明
- **错误处理**: 必须包含完善的异常处理机制
- **性能优化**: 考虑性能优化和最佳实践
- **类型安全**: 使用TypeScript确保类型安全

### 测试用例生成标准
- **覆盖全面**: 测试用例必须覆盖所有功能点和边界条件
- **场景真实**: 测试场景必须贴近实际使用情况
- **数据完整**: 提供完整的测试数据和预期结果
- **执行可行**: 测试用例必须可以实际执行

## 部署要求

### Vercel部署
- **自动部署**: 连接GitHub仓库，自动部署
- **环境变量**: 配置Supabase相关环境变量和Gemini API Key
- **域名配置**: 支持自定义域名
- **性能优化**: 自动CDN加速和图片优化
- **Next.js配置**: 使用App Router架构，支持Server Components和Client Components

### Supabase部署
- **数据库迁移**: 使用Supabase CLI进行数据库迁移
- **Edge Functions**: 部署服务端函数
- **存储配置**: 配置文件存储和CDN
- **监控告警**: 配置性能监控和错误告警
